<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>주소 검색</title>

    <!-- 1) 카카오맵 JS SDK (Geocoding 등 services 라이브러리 포함) -->
    <script
            src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=fac1a7840cef92302567f8f69a17f197&libraries=services"
    ></script>
    <!-- 2) Daum 우편번호 검색 스크립트 -->
    <script
            src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"
    ></script>

    <style>
        /* WebView 전체를 우편번호 검색 위젯으로 채우기 */
        html, body { margin: 0; padding: 0; height: 100%; }
        #wrap { width: 100%; height: 100%; }
    </style>
</head>
<body>
<div id="wrap"></div>

<script>
    // 페이지 로드 후 바로 Daum Postcode 위젯 실행
    window.onload = function() {
      new daum.Postcode({
        oncomplete: function(data) {
          // 사용자가 주소를 선택했을 때 호출됩니다.
          var address = data.address; // 도로명 or 지번 주소

          // Flutter InAppWebView 쪽으로 전달
          if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
            window.flutter_inappwebview.callHandler('onAddressSelected', address);
          } else {
            // 디버깅용 예비 처리
            alert('선택된 주소: ' + address);
          }
        },
        width : '100%',
        height: '100%'
      }).embed(document.getElementById('wrap'));
    };
</script>
</body>
</html>
